@if (cow) {
  <div>
    <div class="flex items-center gap-4 mb-5">
      <button
        class="border border-gray-300 hover:bg-gray-100 text-gray-600 text-sm px-4 py-2 rounded transition-colors whitespace-nowrap"
        (click)="goBack()">
        ‚Üê Back to List
      </button>
      <h1 class="text-2xl font-semibold text-green-900">Cow Detail: {{ cow.id }}</h1>
    </div>

    <div class="grid md:grid-cols-[340px_1fr] gap-5 items-start">

      <div class="bg-white rounded-md shadow-sm p-6">
        <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-4">Basic Information</h2>

        <div class="flex flex-col divide-y divide-gray-50">
          <div class="flex justify-between items-center py-2.5">
            <span class="text-sm text-gray-500">Ear Tag</span>
            <span class="text-base font-bold text-green-800">{{ cow.id }}</span>
          </div>
          <div class="flex justify-between items-center py-2.5">
            <span class="text-sm text-gray-500">Sex</span>
            <span class="text-sm font-medium text-gray-800">{{ cow.sex }}</span>
          </div>
          <div class="flex justify-between items-center py-2.5">
            <span class="text-sm text-gray-500">Pen</span>
            <span class="text-sm font-medium text-gray-800">{{ cow.pen }}</span>
          </div>
          <div class="flex justify-between items-center py-2.5">
            <span class="text-sm text-gray-500">Status</span>
            <span class="px-3 py-0.5 rounded-full text-xs font-medium"
              [ngClass]="{
                'bg-green-100 text-green-800': cow.status === 'Active',
                'bg-orange-100 text-orange-700': cow.status === 'In Treatment',
                'bg-red-100 text-red-700': cow.status === 'Deceased'
              }">
              {{ cow.status }}
            </span>
          </div>
          <div class="flex justify-between items-center py-2.5">
            <span class="text-sm text-gray-500">Last Event</span>
            <span class="text-sm font-medium text-gray-800">{{ cow.lastEventDate }}</span>
          </div>
        </div>

        <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mt-6 mb-4">Weight & Growth</h2>

        <div class="flex flex-col divide-y divide-gray-50">
          <div class="flex justify-between items-center py-2.5">
            <span class="text-sm text-gray-500">Current Weight</span>
            <span class="text-sm font-medium text-gray-800">
              @if (cow.weight) { {{ cow.weight }} kg }
              @else { <span class="text-gray-400">N/A</span> }
            </span>
          </div>
          <div class="flex justify-between items-center py-2.5">
            <span class="text-sm text-gray-500">Daily Weight Gain</span>
            <span class="text-sm font-medium text-gray-800">
              @if (cow.dailyWeightGain) { {{ cow.dailyWeightGain }} kg/day }
              @else { <span class="text-gray-400">N/A</span> }
            </span>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-md shadow-sm p-6">
        <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-5">Event Timeline</h2>

        @if (cow.events && cow.events.length > 0) {
          <div class="flex flex-col">
            @for (event of cow.events; track event.date + event.type; let last = $last) {
              <div class="flex gap-4" [class.pb-5]="!last">
                <div class="flex flex-col items-center">
                  <div class="w-9 h-9 rounded-full bg-green-50 border-2 border-green-300 flex items-center justify-center text-base z-10 shrink-0">
                    {{ getEventIcon(event.type) }}
                  </div>
                  @if (!last) {
                    <div class="w-0.5 bg-gray-200 flex-1 mt-1"></div>
                  }
                </div>
                <div class="pt-1 pb-1">
                  <div class="flex items-center gap-3 mb-1">
                    <span class="text-sm font-semibold text-gray-800">{{ event.type }}</span>
                    <span class="text-xs text-gray-400">{{ event.date }}</span>
                  </div>
                  <p class="text-sm text-gray-600 leading-relaxed">{{ event.description }}</p>
                </div>
              </div>
            }
          </div>
        } @else {
          <p class="text-gray-400 text-sm">No events recorded.</p>
        }
      </div>
    </div>
  </div>
}
